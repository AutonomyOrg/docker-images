# This Github Actions script is triggered when new modifications are pushed to
# main branch. It aims at checking Dockerfile, so that to be sure best practices
# for Docker image engineering are applied.
#
# See https://docs.docker.com/develop/develop-images/dockerfile_best-practices/

name: Integrate new modifications

on:
  # Triggered on pull requests
  pull_request:
    types: [ opened, edited, synchronize, reopened ]

  # Triggered on pushes to main or a featuer branch
  push:
    branches:
      - 'main'
      - 'feature**'

jobs:
  # Job used to check coding's best practices
  coding-standards:
    name: Check coding standards
    runs-on: ubuntu-latest

    steps:
      # Checkout repository with full history (not only the latest commit)
      - name: Set up repository
        uses: actions/checkout@v3
        with:
          set-safe-directory: true

      # Lint Dockerfile
      - name: Lint Dockerfiles recursively
        uses: hadolint/hadolint-action@v2.0.0
        with:
          recursive: true
          dockerfile: Dockerfile
